/*
 * port.c
 *
 * Created: 2017/12/13 11:19:03
 *  Author: 许旗
 */ 


#include "port.h"


void port_init(){
	
	/*-------------------------------------
		GPRS	端口初始化
			RESET			PA2		OUT
			POWER_KEY		PA3		OUT	
	---------------------------------------
		TM1726	端口初始化
			SDA				PA0		OUT
			SCL				PA1		OUT
	-------------------------------------*/
	DDRA |= ((1 << PA0) | (1 << PA1) | (1 << PA2) | (1 << PA3));
	
	/*------------------------------------
		ADC		端口初始化
	------------------------------------*/
	PORTF &= ~((0x01<< PF7) | (0x01<<PF6 )|(0x01<<PF5));
	DDRF  &= ~((0x01<< PF7) | (0x01<<PF6) |(0x01<<PF5));
	
	/*------------------------------------
		uart	端口初始化
	------------------------------------*/
	DDRE	|=	 (1 << PE1);		//TXD设置为输出
	DDRE	&=	~(1 << PE0);		//RXD设置为输入
	PORTE	&=	 0xFF;				//uart0
	
	DDRD	|=	 (1 << PD3);		//TXD设置为输出
	DDRD	&=	~(1 << PD2);		//RXD设置为输入
	PORTD	&=	 0xFF;				//uart1
	
	/*------------------------------------
		led		端口初始化
	------------------------------------*/
	DDRC	|=	(1 << PC0);			//PC0设置为输出
	PORTC	|=	(1 << PC0);			//熄灭led
	
	/*------------------------------------
		beep	端口初始化
	------------------------------------*/
	DDRB	|=	 (1 << PB0);		//PB0设置为输出
	PORTB	&=	~(1 << PB0);		//蜂鸣器不响

	/*------------------------------------
		TM1726背光灯	端口初始化
	------------------------------------*/
	DDRE	|=	(1 << PE2);			//PE2设置为输出
	PORTE	|=	(1 << PE2);			//打开背光	
	
	/*------------------------------------
		TM1726串行	端口初始化
			PA0		SDA		设置为输出
			PA1		SCL		设置为输出
	------------------------------------*/	
	DDRA	|=	((1 << PA0) | (1 << PA1));
	PORTA	|=	((1 << PA0) | (1 << PA1));
	
	
	//????
	//DDRC |= (0x7<<1);
	//PORTA |= (0x7<<1);
	
}